<!DOCTYPE html>
<html>

<head>
    <title>Registration Form</title>
</head>

<body>
    <div>
        <a href="/project">Projects</a>
        <a href="/home">Back to home</a>
    </div>

    <fieldset id="wd201-01">
        <h2>Registration Form</h2>
        <form id="registrationForm">
            <p>
                <label for="name">Name</label>
                <input type="text" id="uname" placeholder="Enter full Name" name="Name" required>
            </p>
            <p>
                <label for="email">Email</label>
                <input type="email" id="email" placeholder="Enter email" name="Email" required>
            </p>
            <p>
                <label for="password">Password</label>
                <input type="password" id="password" placeholder="Enter password" name="Password" required>
            </p>
            <p>
                <label for="dob">Date of Birth</label>
                <input type="date" name="DOB" id="dob">
            </p>
            <p id="iagree">
                <input type="checkbox" id="agree-to-terms" required>
                <label for="agree-to-terms">Accept Terms & Conditions</label>
            </p>
            <input type="submit" id="wd201-submit" value="Submit" />
        </form>
    </fieldset>

    <fieldset id="wd201-02">
        <h2>Entries</h2>
        <table id="tableData">
            <thead>
                <th>Name</th>
                <th>Email</th>
                <th>Password</th>
                <th>Dob</th>
                <th>Accepted terms?</th>
            </thead>
            <tbody>
            </tbody>
        </table>
    </fieldset>

    <script>
        const currentDate = new Date();
        const minDate = new Date();
        const maxDate = new Date();

        minDate.setFullYear(currentDate.getFullYear() - 55);
        maxDate.setFullYear(currentDate.getFullYear() - 18);

        document.getElementById("dob").setAttribute("min", minDate.toISOString().split('T')[0]);
        document.getElementById("dob").setAttribute("max", maxDate.toISOString().split('T')[0]);

        const registrationForm = document.getElementById("registrationForm");

        registrationForm.addEventListener("submit", function (e) {
            e.preventDefault();

            const name = document.getElementById("uname").value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const dob = document.getElementById("dob").value;

            const tableBody = document.querySelector("#tableData tbody");
            const row = document.createElement("tr");

            const nameCell = document.createElement("td");
            nameCell.textContent = name;

            const emailCell = document.createElement("td");
            emailCell.textContent = email;

            const passCell = document.createElement("td");
            passCell.textContent = password;

            const dobCell = document.createElement("td");
            dobCell.textContent = dob;

            const agreedCell = document.createElement("td");
            agreedCell.textContent = "true";

            row.appendChild(nameCell);
            row.appendChild(emailCell);
            row.appendChild(passCell);
            row.appendChild(dobCell);
            row.appendChild(agreedCell);

            tableBody.appendChild(row);

            // Clear input fields
            document.getElementById("uname").value = "";
            document.getElementById("email").value = "";
            document.getElementById("password").value = "";
            document.getElementById("dob").value = "";

            // Store data in local storage
            const names = JSON.parse(localStorage.getItem("Names")) || [];
            const emails = JSON.parse(localStorage.getItem("Emails")) || [];
            const passwords = JSON.parse(localStorage.getItem("Passwords")) || [];
            const dobs = JSON.parse(localStorage.getItem("DOBs")) || [];

            names.push(name);
            emails.push(email);
            passwords.push(password);
            dobs.push(dob);

            localStorage.setItem("Names", JSON.stringify(names));
            localStorage.setItem("Emails", JSON.stringify(emails));
            localStorage.setItem("Passwords", JSON.stringify(passwords));
            localStorage.setItem("DOBs", JSON.stringify(dobs));
        });

        // Load and display data from local storage
        function displayData() {
            const names = JSON.parse(localStorage.getItem("Names")) || [];
            const emails = JSON.parse(localStorage.getItem("Emails")) || [];
            const passwords = JSON.parse(localStorage.getItem("Passwords")) || [];
            const dobs = JSON.parse(localStorage.getItem("DOBs")) || [];

            const tableBody = document.querySelector("#tableData tbody");

            for (let i = 0; i < names.length; i++) {
                const row = document.createElement("tr");

                const nameCell = document.createElement("td");
                nameCell.textContent = names[i];

                const emailCell = document.createElement("td");
                emailCell.textContent = emails[i];

                const passCell = document.createElement("td");
                passCell.textContent = passwords[i];

                const dobCell = document.createElement("td");
                dobCell.textContent = dobs[i];

                const agreedCell = document.createElement("td");
                agreedCell.textContent = "true";

                row.appendChild(nameCell);
                row.appendChild(emailCell);
                row.appendChild(passCell);
                row.appendChild(dobCell);
                row.appendChild(agreedCell);

                tableBody.appendChild(row);
            }
        }

        displayData();
    </script>
</body>

</html>
